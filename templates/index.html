<!DOCTYPE html>
<html>
<head>
    <title>Storytelling Chatbot</title>
    <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>
<body>
    <div class="heading-container custom-width">
        <div class="row justify-content-center mt-4"> <!-- Center the content -->
            <div class="col">
                <h1 class="custom-heading">Welcome to the storytelling Chatbot</h1>
                <hr class="custom-line"> <!-- Horizontal line -->
            </div>
        </div>
    </div>

    {% if chat_history %}
    <div class="container custom-width">
        <div id="content">
            {% for item in chat_history %}
                <div class="card mb-3 {% if item.speaker == 'user' %}text-right{% endif %} {% if item.speaker == 'user' %}bg-light{% endif %}">
                    <div class="card-body">
                        {% if item.speaker == 'user' %}
                        {{ item.text }}<strong class="text-primary"> :You</strong>
                        {% elif item.speaker == 'chatbot' %}
                        <strong class="text-light-green">Chatbot: </strong>
                        <span class="text-to-speak">{{ item.text }}</span>
                        <i class="fas fa-volume-up speak-icon animate__animated animate__pulse"></i>
                        {% endif %}

                    
                    
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    {% endif %}

    <form method="post" id="input-form" class="fixed-form custom-width"> <!-- Center the form -->
        <div class="row justify-content-center"> <!-- Center the input and button -->
            <div class="col-10">
                <input type="text" id="user_input" name="user_input" class="form-control " placeholder="Chat to storytelling chatbot here....">
            </div>
            <div class="col-0">
                <button type="submit" class="btn btn-primary">Send</button>
            </div>
        </div>
        {% for item in chat_history %}
            <input type="hidden" name="chat_history" value="{{ item.speaker }},{{ item.text }}">
        {% endfor %}
    </form>
    
    {% if quit_msg %}
        <div id="quit-msg" class="mt-4 alert alert-danger">
            {{ quit_msg }}
        </div>
    {% endif %}

</body>
</html>
